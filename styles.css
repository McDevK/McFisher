/* McFisher 桌面端样式 - 复用McCalculator配色体系 */
* { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --ff14-primary: #2a2320;
  --ff14-secondary: #c9a86a;
  --ff14-accent: #e7d7b1;
  --ff14-bg-dark: #181411;
  --ff14-bg-light: #3a322c;
  --ff14-text-primary: #f5ecd7;
  --ff14-text-secondary: #b8a98a;
  --ff14-border: #c9a86a;
  --ff14-shadow: rgba(60, 40, 10, 0.3);
  --ff14-glow: rgba(201, 168, 106, 0.25);
}

[data-theme="light"] {
  --ff14-primary: #f5f0e8;
  --ff14-secondary: #8b6914;
  --ff14-accent: #b8860b;
  --ff14-bg-dark: #fefbf6;
  --ff14-bg-light: #f0e6d2;
  --ff14-text-primary: #2c1810;
  --ff14-text-secondary: #5a4a3a;
  --ff14-border: #8b6914;
  --ff14-shadow: rgba(139,105,20,0.15);
  --ff14-glow: rgba(139,105,20,0.3);
}

body {
  font-family: 'Noto Sans SC', sans-serif;
  background: linear-gradient(135deg, var(--ff14-bg-dark) 0%, var(--ff14-bg-light) 100%);
  background-attachment: fixed;
  color: var(--ff14-text-primary);
  min-height: 100vh;
}

/* Header */
.header { background: linear-gradient(90deg, var(--ff14-primary) 0%, var(--ff14-bg-light) 100%); border-bottom: 2px solid var(--ff14-secondary); box-shadow: 0 4px 20px var(--ff14-shadow); position: sticky; top: 0; z-index: 100; }
.header-content { max-width: 1400px; margin: 0 auto; padding: 0 20px; height: 70px; display: flex; align-items: center; justify-content: space-between; }
.logo { display: flex; align-items: center; gap: 10px; color: var(--ff14-secondary); font-weight: 700; font-size: 22px; text-shadow: 0 0 10px var(--ff14-glow); }
.header-right { display: flex; align-items: center; gap: 12px; }
.theme-toggle { width: 44px; height: 44px; border-radius: 50%; border: 2px solid var(--ff14-secondary); background: transparent; color: var(--ff14-secondary); display: inline-flex; align-items: center; justify-content: center; cursor: pointer; }

.local-time-box { display: inline-flex; flex-direction: column; gap: 2px; align-items: center; justify-content: center; border: 2px solid var(--ff14-border); border-radius: 10px; padding: 6px 10px; }
.time-row { display: inline-flex; align-items: center; line-height: 1; }
.time-row .time-label { font-size: 12px; font-weight: 700; margin-right: 6px; color: var(--ff14-secondary); }
.time-row .time-value { font-size: 14px; font-weight: 800; letter-spacing: 1px; color: var(--ff14-text-primary); }

/* Layout */
.main-content { max-width: 1400px; margin: 0 auto; padding: 20px; }
.user-profile-panel { background: var(--ff14-primary); border-radius: 16px; border: 2px solid var(--ff14-border); box-shadow: 0 6px 16px var(--ff14-shadow); padding: 14px 14px 16px; margin-bottom: 12px; }
.user-profile-panel.collapsed { padding: 8px 12px; }
.user-profile { display: grid; grid-template-columns: 190px 1fr; align-items: stretch; gap: 12px 16px; }
/* 方形头像，高度与右侧四行信息区相同：每行32px + 行间距10px 共约 4*32 + 3*10 = 158px，再考虑内边距，设置为 160px */
.avatar-wrap { position: relative; width: 178px; height: 100%; min-height: 150px; border-radius: 14px; overflow: hidden; border: 2px solid var(--ff14-border); background: var(--ff14-bg-dark); box-shadow: 0 2px 8px var(--ff14-shadow); }
.avatar { width: 100%; height: 100%; object-fit: cover; display: block; }
.avatar-wrap { cursor: pointer; }
.avatar-mobile-box { display: none; }
.avatar-mobile-wrap { width: 140px; height: 140px; border-radius: 50%; overflow: hidden; border: 3px solid var(--ff14-border); background: var(--ff14-bg-dark); box-shadow: 0 2px 8px var(--ff14-shadow); margin: 0 auto 10px; }
.avatar.mobile { width: 100%; height: 100%; object-fit: cover; display: block; }
.profile-main { display: flex; flex-direction: column; gap: 6px; }
.nickname { min-height: 32px; padding: 4px 8px; border-radius: 8px; border: 2px dashed #55514d; background: var(--ff14-bg-dark); outline: none; max-width: 360px; color: var(--ff14-text-primary); }
.nickname:focus { border-style: solid; box-shadow: 0 0 0 3px var(--ff14-glow) inset; }
.nickname:empty:before { content: attr(data-placeholder); color: var(--ff14-text-secondary); }
.user-divider { height: 2px; background: linear-gradient(90deg, transparent 0%, var(--ff14-secondary) 20%, var(--ff14-secondary) 80%, transparent 100%); margin: 12px 0 8px; }
.user-profile-panel.collapsed .user-divider,
.user-profile-panel.collapsed .user-profile,
.user-profile-panel.collapsed .avatar-mobile-box,
.user-profile-panel.collapsed .cert-achievements,
.user-profile-panel.collapsed .cert-footer-note { display: none; }
.user-extra { min-height: 40px; color: var(--ff14-text-secondary); }
.user-profile-panel .user-card-header { position: relative; display: flex; align-items: center; justify-content: center; gap: 10px; padding: 4px 0 8px; cursor: pointer; user-select: none; }
.user-profile-panel .user-card-header::before,
.user-profile-panel .user-card-header::after { content: ""; display: inline-block; width: 28px; height: 2px; background: var(--ff14-border); border-radius: 2px; }
.user-card-header { font-weight: 900; text-align: center; color: var(--ff14-secondary); letter-spacing: 2px; font-size: 18px; }
.user-card-meta { display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 2px; align-content: start; }
.meta-row { display: grid; grid-template-columns: 110px 1fr; align-items: center; gap: 0 12px; }
.meta-label { display: inline-flex; align-items: center; justify-content: center; padding: 8px 10px; border-radius: 12px; border: 1px solid #D6C6A9; background: #EDE4D0; color: var(--ff14-text-primary); text-align: center; font-weight: 700; min-height: 40px; }
.meta-value { display: inline-block; padding: 6px 10px; border-radius: 12px; border: 2px dashed #B79A6B; min-height: 36px; max-width: 100%; background: #FFFDF8; color: var(--ff14-text-primary); font-size: 14px; }
/* 进度一行显示，不截断，不省略 */
#userProgress.meta-value { white-space: nowrap; }
[data-theme="light"] .meta-label { background: #f6efe1; }
/* 夜间主题下证件可读性增强 */
[data-theme="dark"] .meta-label { background: #3a2f27; border-color: #a6854c; color: #f5ecd7; }
[data-theme="dark"] .meta-value { background: #2b241f; border-color: #c9a86a; color: #f5ecd7; }
[data-theme="dark"] .cert-loot-item { border-color: #c9a86a; background: #1f1a16; }
[data-theme="dark"] .cert-achievements-title { color: #e6c387; }
[data-theme="dark"] .user-card-header { color: #e6c387; }

/* 证件：战利品区 */
.cert-achievements { margin-top: 10px; border-top: 1px dashed #D4C4A7; padding-top: 10px; }
.cert-achievements-title { font-weight: 700; color: var(--ff14-secondary); margin-bottom: 8px; }
.cert-loot-grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 6px; }
.cert-loot-item { border: 2px dashed #B79A6B; border-radius: 8px; aspect-ratio: 1 / 1; background: transparent; display: flex; align-items: center; justify-content: center; overflow: hidden; }
.cert-loot-item img { width: 100%; height: 100%; object-fit: cover; display: block; }
.cert-loot-item.drag-over { outline: 2px dashed var(--ff14-secondary); outline-offset: -2px; }
.cert-loot-item.dragging { opacity: .55; transform: scale(.97); }
.cert-footer-note { text-align: center; font-size: 12px; color: #8C7B60; margin-top: 6px; }

/* 头像裁剪浮窗 */
.avatar-modal.hidden { display: none; }
.avatar-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; }
.avatar-modal-content { width: 480px; max-width: 95vw; background: var(--ff14-primary); border: 2px solid var(--ff14-border); border-radius: 12px; box-shadow: 0 8px 40px rgba(0,0,0,0.4); }
.avatar-modal-header { padding: 12px 14px; border-bottom: 2px solid var(--ff14-border); color: var(--ff14-secondary); font-weight: 700; }
.avatar-modal-body { padding: 12px 14px; display: grid; gap: 10px; }
.avatar-modal-canvas-wrap { width: 100%; height: 320px; background: var(--ff14-bg-dark); border: 2px dashed #55514d; border-radius: 8px; display: flex; align-items: center; justify-content: center; overflow: hidden; }
.avatar-modal-toolbar { display: flex; align-items: center; gap: 10px; }
.avatar-modal-toolbar .spacer { flex: 1; }
.btn { padding: 6px 12px; border-radius: 8px; border: 2px solid var(--ff14-border); cursor: pointer; }
.btn-primary { background: var(--ff14-secondary); color: #1b1b1b; }
.btn-secondary { background: var(--ff14-bg-light); color: var(--ff14-text-primary); }
.avatar-hint { font-size: 12px; color: var(--ff14-text-secondary); }
.fisher-container { display: grid; grid-template-columns: minmax(600px, 1.4fr) minmax(520px, 1.6fr); gap: 24px; min-height: 70vh; align-items: start; }

.section-header { display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 14px; padding-bottom: 10px; border-bottom: 2px solid #55514d; flex: 0 0 auto; }
.section-header h2 { color: var(--ff14-secondary); font-size: 18px; display: flex; gap: 8px; align-items: center; }

.search-box { position: relative; width: 100%; max-width: 260px; }
.search-box { display: flex; align-items: center; gap: 8px; }
.search-box input { flex: 1 1 auto; padding: 8px 36px 8px 12px; background: var(--ff14-bg-light); border: 2px solid #55514d; border-radius: 8px; color: var(--ff14-text-primary); }
.search-box i { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); color: var(--ff14-text-secondary); }

.filter-btn { width: 32px; height: 32px; border: none; border-radius: 8px; background: transparent; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; transition: transform .12s ease; }
.filter-btn img { width: 22px; height: 22px; display: block; object-fit: contain; filter: brightness(1.05) contrast(1.05); }
.filter-btn:hover { transform: translateY(-1px) scale(1.04); }

/* 筛选浮窗 */
.filter-modal.hidden { display: none; }
.filter-modal { position: fixed; inset: 0; background: transparent; z-index: 1000; }
.filter-modal-content { position: fixed; width: auto; min-width: 420px; max-width: 80vw; background: var(--ff14-primary); border: 2px solid var(--ff14-border); border-radius: 10px; box-shadow: 0 8px 24px rgba(0,0,0,0.35); }
.filter-modal-header { display: flex; align-items: center; justify-content: space-between; padding: 8px 12px; border-bottom: 2px solid var(--ff14-border); color: var(--ff14-secondary); font-weight: 700; }
.filter-modal-body { padding: 10px 12px; display: grid; gap: 10px; }
.filter-group { display: grid; gap: 8px; }
.filter-title { font-weight: 700; color: var(--ff14-secondary); }
.chips { display: flex; gap: 8px; flex-wrap: wrap; }
.chip { padding: 6px 10px; border-radius: 18px; border: 2px solid #55514d; background: var(--ff14-bg-dark); color: var(--ff14-text-primary); cursor: pointer; transition: transform .1s ease, box-shadow .1s ease, background .1s ease; }
.chip:hover { transform: translateY(-1px); }
.chip.active { border-color: var(--ff14-border); background: #f6efe1; color: #6b4e21; box-shadow: 0 0 0 2px rgba(201,168,106,0.35) inset; }
.chip.active::after { content: '✓'; font-weight: 900; margin-left: 6px; }
[data-theme="dark"] .chip.active { background: #3a322c; color: #ffdba0; box-shadow: 0 0 0 2px rgba(201,168,106,0.35) inset; }
[data-theme="light"] .chip { background: #fff8ee; border-color: #c5b28e; color: #3b2a18; }
[data-theme="light"] .chip.active { background: #f6efe1; border-color: #c5b28e; color: #6b4e21; }

@keyframes chip-shake { 10%, 90% { transform: translateX(-1px); } 20%, 80% { transform: translateX(2px);} 30%, 50%, 70% { transform: translateX(-4px);} 40%, 60% { transform: translateX(4px);} }
.chip.deny { animation: chip-shake .35s; }

/* 全部钓法折叠控制 */
.toggle-chip { display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; border-radius: 16px; border: 2px solid var(--ff14-border); background: var(--ff14-bg-light); color: var(--ff14-text-primary); cursor: pointer; font-weight: 700; }
[data-theme="light"] .toggle-chip { background: #f6efe1; }
.toggle-chip .arrow { display: inline-block; transition: transform .15s ease; }
.toggle-chip[aria-expanded="true"] .arrow { transform: rotate(90deg); }
.all-block { margin-top: 8px; }
.all-block.collapsed { display: none; }

/* 钓场地图展示 */
.spot-map { margin-top: 10px; display: flex; flex-direction: column; align-items: center; }
.spot-map-title { font-weight: 800; color: var(--ff14-secondary); margin: 8px 0; text-shadow: 0 0 8px var(--ff14-glow); }
.spot-map-img { width: 400px; height: 400px; object-fit: cover; border: 2px solid var(--ff14-border); border-radius: 50px; background: var(--ff14-bg-light); box-shadow: 0 2px 8px var(--ff14-shadow); }

.fish-list-panel, .fish-detail-panel { background: var(--ff14-primary); border-radius: 14px; border: 2px solid var(--ff14-border); box-shadow: 0 2px 12px var(--ff14-shadow); padding: 18px; }
.fish-list-panel { display: flex; flex-direction: column; min-height: 0; min-width: 600px; }

.fish-list { display: flex; flex-direction: column; gap: 10px; flex: 1 1 auto; min-height: 0; overflow-y: auto; }
.pin-separator { height: 8px; border: none; border-top: 2px dashed #6f5c3a; opacity: .45; margin: 6px 2px; }
.fish-item { display: flex; align-items: center; justify-content: space-between; gap: 10px; background: var(--ff14-bg-dark); border: 2px solid #55514d; border-radius: 10px; padding: 10px 12px; cursor: pointer; }
.fish-item:hover { border-color: var(--ff14-secondary); box-shadow: 0 6px 20px var(--ff14-shadow); }
.fish-item.active { background: linear-gradient(135deg, rgba(40,167,69,0.12) 0%, rgba(40,167,69,0.06) 100%); border-color: #28a745; }
[data-theme="light"] .fish-item.active { background: linear-gradient(135deg, rgba(46,160,67,0.16) 0%, rgba(46,160,67,0.08) 100%); border-color: #2ea043; }
.fish-info { display: flex; align-items: center; gap: 10px; min-width: 0; }
.pin-btn { width: 22px; height: 22px; padding: 0; border: none; border-radius: 50%; background: transparent; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; transition: transform .12s ease, filter .12s ease; }
.pin-btn img { width: 100%; height: 100%; object-fit: contain; display: block; border-radius: 50%; filter: grayscale(20%) brightness(.98); }
.pin-btn:hover { transform: translateY(-1px) scale(1.06); }
.pin-btn:active { transform: scale(.95); }
.pin-btn.on img { filter: hue-rotate(35deg) saturate(1.6) brightness(1.12); }
.complete-btn { width: 24px; height: 24px; padding: 0; border: none; border-radius: 50%; background: transparent; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; transition: transform .12s ease, filter .12s ease; }
.complete-btn img { width: 100%; height: 100%; object-fit: contain; display: block; border-radius: 50%; filter: grayscale(35%) brightness(.95) contrast(1.05); }
.complete-btn:hover { transform: translateY(-1px) scale(1.06); }
.complete-btn:active { transform: scale(.95); }
.complete-btn.done img { filter: hue-rotate(85deg) saturate(1.8) brightness(1.12) contrast(1.12); }
[data-theme="light"] .complete-btn.done img { filter: hue-rotate(85deg) saturate(2) brightness(1.15) contrast(1.2); }
.fish-icon { width: 28px; height: 28px; border-radius: 6px; border: 1px solid var(--ff14-border); background: var(--ff14-bg-light); object-fit: cover; flex: 0 0 auto; box-shadow: 0 1px 4px var(--ff14-shadow); transition: opacity 0.3s ease; }
.fish-icon.lg { width: 64px; height: 64px; border-radius: 10px; }
.fish-icon.sm { width: 20px; height: 20px; border-radius: 4px; }
.fish-icon, .bait-icon { background-color: transparent; }
.fish-icon[src$='.webp'], .bait-icon[src$='.webp'] { image-rendering: auto; }
.tile-icon, .bait-icon { width: 42px; height: 42px; border-radius: 10px; border: 2px solid var(--ff14-border); background: var(--ff14-bg-light); object-fit: cover; box-shadow: 0 2px 6px var(--ff14-shadow); }
.bait-icon { width: 42px; height: 42px; }
.method-line { display: flex; align-items: center; gap: 8px; margin: 4px 0; }

/* 详情：钓法图标链路 */
.method-chain { display: flex; align-items: center; gap: 10px; padding: 4px 0; }
.chain-arrow { color: var(--ff14-secondary); font-weight: 900; opacity: 0.7; font-size: 16px; }
.indicator-col { display: grid; grid-auto-rows: max-content; place-items: center; gap: 4px; }
.method-chain .rod-icon { width: 26px; height: 22px; }
.method-chain .hook-icon { width: 22px; height: 22px; }
/* 计数徽标已移除 */
/* 统一基础信息图标的基线与间距 */
.meta-icon { height: 28px; display: inline-block; vertical-align: -3px; margin-right: 8px; }
.rod-icon { width: 34px; height: 28px; object-fit: cover; border-radius: 9px; border: 2px solid var(--ff14-border); background: transparent; padding: 0; }
.hook-icon { width: 28px; height: 28px; object-fit: contain; border-radius: 50%; border: 2px solid var(--ff14-border); background: var(--ff14-bg-light); padding: 2px; }
.current-icon { width: 28px; height: 28px; object-fit: contain; border-radius: 50%; }
.fish-name { font-weight: 700; color: var(--ff14-text-primary); display: inline-flex; align-items: center; gap: 6px; }
.fish-name-text { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block; max-width: 16ch; }
.fish-info { overflow: visible; }
.collect-badge { width: 16px; height: 16px; vertical-align: -2px; display: inline-block; opacity: .95; filter: brightness(1.15) contrast(1.3) saturate(1.2) drop-shadow(0 0 2px rgba(0,0,0,0.55)) drop-shadow(0 0 1px rgba(255,255,255,0.4)); }
[data-theme="light"] .collect-badge { opacity: 1; filter: brightness(1.35) contrast(1.6) saturate(1.35) drop-shadow(0 0 3px rgba(0,0,0,0.65)) drop-shadow(0 1px 0 rgba(0,0,0,0.5)); }
.fish-item.completed { opacity: .6; filter: grayscale(40%); }
.fish-tags { display: flex; gap: 6px; align-items: center; flex-wrap: wrap; }
.tag { display: inline-flex; align-items: center; padding: 2px 8px; border-radius: 6px; border: 1px solid var(--ff14-border); font-size: 12px; color: var(--ff14-text-secondary); background: rgba(0,0,0,0.2); }
/* 更协调的时间/天气颜色（深浅主题均适配） */
.tag-time { border-color:#c5b28e; background:#f6efe1; color:#6b4e21; }
.tag-weather { border-color:#9bbbd4; background:#edf6ff; color:#1d4a73; }

/* 白天模式下去除灰底，使用更浅的协调色 */
[data-theme="light"] .tag { background: transparent; }
[data-theme="light"] .tag-time { background:#f6efe1; border-color:#c5b28e; color:#6b4e21; }
[data-theme="light"] .tag-weather { background:#edf6ff; border-color:#9bbbd4; color:#1d4a73; }
.countdown { font-size: 12px; color: var(--ff14-text-secondary); border: 1px solid var(--ff14-border); border-radius: 6px; padding: 4px 8px; min-width: 120px; text-align: center; position: relative; overflow: hidden; }
.countdown.active { border-color: #28a745; }
.countdown.pending { border-color: #cc4b4b; }
.countdown .progress { position: absolute; top: 0; left: 0; height: 100%; width: var(--progress, 0%); background: linear-gradient(90deg, rgba(40,167,69,.3) 0%, rgba(40,167,69,.1) 100%); pointer-events: none; }
.countdown .countdown-text { position: relative; z-index: 1; }
.fish-item.completed .countdown .progress { display: none; }

.empty-state { text-align: center; color: var(--ff14-text-secondary); padding: 30px 10px; }

.fish-detail { min-height: 300px; }

/* 详情面板美化 */
.detail-container { display: grid; gap: 12px; }
.detail-header { display: flex; align-items: center; gap: 12px; padding: 6px 8px; }
.detail-title { font-size: 22px; font-weight: 800; color: var(--ff14-secondary); text-shadow: 0 0 8px var(--ff14-glow); display: inline-flex; align-items: center; gap: 8px; }
.detail-actions { margin-left: auto; display: inline-flex; align-items: center; gap: 8px; }
.spoil-btn { width: 24px; height: 24px; padding: 0; border: 2px solid transparent; border-radius: 50%; background: transparent; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; transition: transform .12s ease, filter .12s ease, box-shadow .12s ease, border-color .12s ease; }
.spoil-btn img { width: 100%; height: 100%; object-fit: contain; display: block; border-radius: 50%; filter: grayscale(25%) brightness(.95) contrast(1.05); }
.spoil-btn:hover { transform: translateY(-1px) scale(1.06); }
.spoil-btn:active { transform: scale(.95); }
.spoil-btn.on { border-color: var(--ff14-secondary); box-shadow: 0 0 0 2px rgba(201,168,106,0.35) inset, 0 0 10px var(--ff14-glow); }
.spoil-btn.on img { filter: hue-rotate(35deg) saturate(1.8) brightness(1.15) drop-shadow(0 0 6px rgba(201,168,106,0.7)); }
/* 夜间下提升战利品按钮对比度 */
[data-theme="dark"] .spoil-btn { border-color: rgba(201,168,106,0.45); box-shadow: 0 0 0 2px rgba(201,168,106,0.18) inset; background: radial-gradient(closest-side, rgba(201,168,106,0.12), transparent 70%); }
[data-theme="dark"] .spoil-btn img { filter: brightness(1.18) contrast(1.2) saturate(1.15); }
[data-theme="dark"] .spoil-btn.on { border-color: rgba(201,168,106,0.85); box-shadow: 0 0 0 2px rgba(201,168,106,0.35) inset, 0 0 12px rgba(201,168,106,0.45); }
[data-theme="dark"] .spoil-btn.on img { filter: hue-rotate(35deg) saturate(2) brightness(1.22) drop-shadow(0 0 8px rgba(201,168,106,0.85)); }
.detail-card { background: linear-gradient(180deg, var(--ff14-bg-dark) 0%, rgba(255,255,255,0.02) 100%); border: 2px solid var(--ff14-border); border-radius: 12px; padding: 12px; box-shadow: 0 4px 16px var(--ff14-shadow); }
.detail-card + .detail-card { margin-top: 2px; }
.detail-grid { display: grid; grid-template-columns: 1fr; gap: 8px; }
.field-row { display: flex; align-items: center; gap: 6px; font-size: 14px; }
.detail-card .field-row .tag { font-size: 14px; }
.detail-card .field-row > .tag:first-child { width: 86px; display: inline-flex; justify-content: center; margin-right: 12px; }
.section-title { font-weight: 800; color: var(--ff14-secondary); margin-bottom: 8px; }
.method-list { display: grid; gap: 8px; }

/* 文件夹式标签与容器 */
.folder { margin-top: 6px; }
.folder-tabs { display: flex; gap: 8px; align-items: flex-end; padding-left: 0; margin-left: 0; flex-wrap: wrap; white-space: normal; overflow: visible; }
.folder-tabs .tab { position: relative; padding: 6px 10px; border: 2px solid var(--ff14-border); border-bottom: none; border-top-left-radius: 8px; border-top-right-radius: 8px; background: linear-gradient(180deg, var(--ff14-bg-light) 0%, rgba(255,255,255,0.03) 100%); color: var(--ff14-text-primary); cursor: pointer; display: inline-flex; align-items: center; min-width: 120px; max-width: 160px; font-size: 14px; line-height: 1.15; overflow: hidden; text-overflow: ellipsis; white-space: normal; word-break: break-all; line-clamp: 2; -webkit-line-clamp: 2; -webkit-box-orient: vertical; display: -webkit-box; }
.folder-tabs .tab:hover { filter: brightness(1.05); }
.folder-tabs .tab.active { background: var(--ff14-primary); z-index: 2; border-color: var(--ff14-secondary); box-shadow: 0 2px 0 var(--ff14-primary), 0 0 0 2px rgba(201,168,106,0.35) inset; }
.folder-body { border: 2px solid var(--ff14-border); border-radius: 10px; padding: 10px; background: linear-gradient(180deg, var(--ff14-bg-dark) 0%, rgba(255,255,255,0.02) 100%); }
[data-theme="dark"] .folder-tabs .tab { color: #f5ecd7; }
[data-theme="dark"] .spot-map-title { color: #e6c387; }
[data-theme="light"] .folder-tabs .tab { background: #f6efe1; }
[data-theme="light"] .folder-tabs .tab.active { background: #fff8ee; border-color: #8b6914; }
[data-theme="light"] .folder-body { background: #fffaf1; }

/* 展开更多地图 */
.folder-tabs .tab.tab-more { min-width: auto; max-width: none; font-weight: 900; padding: 6px 10px; }
.more-tabs.collapsed { display: none; }

/* 子标题与推荐徽标 */
.subsection-title { font-weight: 800; color: var(--ff14-secondary); margin: 6px 0; display: inline-flex; align-items: center; gap: 6px; }
.recommend-badge { display: inline-block; padding: 2px 8px; border-radius: 999px; border: 2px solid var(--ff14-border); background: #f6efe1; color: #6b4e21; font-weight: 700; }
[data-theme="dark"] .recommend-badge { background: #3a322c; color: #ffdba0; }

/* 悬浮提示 */
.tooltip-floating { position: fixed; z-index: 2147483647; pointer-events: none; background: rgba(32,24,16,0.95); color: #f5ecd7; border: 1px solid var(--ff14-border); border-radius: 6px; padding: 4px 8px; font-size: 12px; box-shadow: 0 2px 8px var(--ff14-shadow); white-space: nowrap; max-width: 60vw; overflow: hidden; text-overflow: ellipsis; }

.footer { margin-top: 30px; background: var(--ff14-bg-dark); }
.footer-divider { height: 2px; background: linear-gradient(90deg, transparent 0%, var(--ff14-secondary) 20%, var(--ff14-secondary) 80%, transparent 100%); max-width: 1400px; margin: 0 auto; }
.footer-content { max-width: 1400px; margin: 0 auto; padding: 24px 20px; text-align: center; color: var(--ff14-text-secondary); }

/* Light overrides */
[data-theme="light"] .fish-item { background: var(--ff14-bg-dark); }
[data-theme="light"] .countdown.active { border-color: #2ea043; }
[data-theme="light"] .countdown.pending { border-color: #d9534f; }

/* 响应式：移动端布局与详情上浮窗（<=900px） */
@media (max-width: 900px) {
  .fisher-container { grid-template-columns: 1fr; }
  .fish-detail-panel { display: none; }
  .main-content { padding: 12px; }
  .fish-list-panel { min-width: 0; }
  /* 证件区缩放与紧凑布局 */
  .user-profile-panel { transform: none; transform-origin: top left; }
  /* 移动端：隐藏方形头像，显示圆形头像并将字段置于其下 */
  .avatar-mobile-box { display: block; }
  .user-profile { grid-template-columns: 1fr; }
  .avatar-wrap { display: none; }
  .meta-row { grid-template-columns: 90px 1fr; }
  .meta-label { min-height: 36px; font-size: 14px; padding: 6px 8px; }
  .meta-value { min-height: 36px; font-size: 14px; padding: 6px 10px; }
  #userProgress.meta-value { white-space: nowrap; }
  /* 列表：仅保留必要元素 */
  .fish-item .complete-btn,
  .fish-item .pin-btn,
  .fish-item .fish-tags { display: none; }
  .fish-item { padding: 10px 12px; }
  .fish-name-text { max-width: 20ch; }
  .countdown { min-width: 100px; }
  /* tabs 可滚动 */
  .folder-tabs { overflow-x: auto; flex-wrap: nowrap; }
  .folder-tabs .tab { min-width: 100px; }
  .spot-map-img { width: min(88vw, 360px); height: min(88vw, 360px); border-radius: 24px; }
  /* 战利品：移动端仅显示 7x2 共14格 */
  .cert-loot-grid { grid-template-columns: repeat(7, 1fr); }
  .cert-loot-grid .cert-loot-item:nth-child(n+15) { display: none; }
}

/* 移动端圆形头像尺寸更大一些，靠容器自适应 */
@media (max-width: 900px) {
  .avatar-mobile-wrap { width: 180px; height: 180px; }
}

.detail-modal.hidden { display: none; }
.detail-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.45); display: none; align-items: flex-end; justify-content: center; z-index: 1200; }
.detail-modal.show { display: flex; }
.detail-modal-panel { width: 100%; max-width: 900px; background: var(--ff14-primary); border: 2px solid var(--ff14-border); border-top-left-radius: 14px; border-top-right-radius: 14px; box-shadow: 0 -6px 24px rgba(0,0,0,0.45); max-height: 88vh; display: flex; flex-direction: column; }
.detail-modal-header { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-bottom: 2px solid var(--ff14-border); color: var(--ff14-secondary); font-weight: 800; }
.detail-modal-body { padding: 8px 10px; overflow-y: auto; }

